<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Patient Dashboard</title>
    <link rel="stylesheet" href="../styles/patient.css" />
  </head>

  <body>
    <nav class="nav-patient">
      <h1>
        <img
          src="../assets/svgs/logo.svg"
          style="margin-right: 1rem; width: 40px"
        />
        MotivSMA
      </h1>
      <div class="links">
        <button id="logout-button" class="btn-logout">Logout</button>
      </div>
    </nav>

    <div class="patient-dashboard-header">
      <h3>Patient Dashboard</h3>
      <div class="sidebar"></div>
    </div>

    <main style="height: 100vh">
      <section class="main-div">
        <article class="patient-sidebar">Welcome,<br />Patient</article>

        <article class="patient-dashboard-buttons">
          <div>
            <h2>Patient Information</h2>
            <form>
              <label>Name:</label>
              <input type="text" id="patient-name" disabled />

              <label>Surname:</label>
              <input type="text" id="patient-surname" disabled />

              <label>Gender:</label>
              <input type="text" id="patient-gender" disabled />

              <label>Birthdate:</label>
              <input type="text" id="patient-birthdate" disabled />

              <label>Height:</label>
              <input type="text" id="patient-height" disabled />

              <label>Weight:</label>
              <input type="text" id="patient-weight" disabled />
            </form>
          </div>

          <button id="start-session-btn" class="log-symptoms-button">
            <img src="../assets/svgs/add.svg" alt="+" />
            Start Session
          </button>

          <div class="stacked">
            <button id="log-symptoms-btn" class="log-symptoms-button hidden">
              <img src="../assets/svgs/add.svg" alt="+" />
              Log Symptoms
            </button>
            <div id="symptoms-container" class="floating-box hidden">
              <h3 class="section-title">Log Symptoms</h3>
              <form id="symptoms-form">
                <div id="symptoms-checkboxes" class="symptom-grid"></div>
                <div style="display: flex; justify-content: flex-end">
                  <button type="submit" class="save-btn">Save Symptoms</button>
                </div>
              </form>
            </div>
          </div>

          <div class="stacked">
            <button id="log-signals-btn" class="log-symptoms-button hidden">
              <img src="../assets/svgs/add.svg" alt="+" />
              Log Signals
            </button>

            <div id="signals-container" class="floating-box hidden">
              <h3 class="section-title">Log Signals</h3>
              <div class="signal-grid">
                <button class="signal-btn" data-signal="ECG">ECG</button>
                <button class="signal-btn" data-signal="EMG">EMG</button>
                <button class="signal-btn" data-signal="ACC">ACC</button>
              </div>
              <div id="record-area" class="record-area hidden">
                <p
                  id="recording-label"
                  style="margin: 0 0 1rem 0; text-align: center; color: #333"
                >
                  Ready to record
                </p>
                <div
                  style="display: flex; gap: 0.75rem; justify-content: center"
                >
                  <button id="record-btn" class="record-control">Record</button>
                  <button id="stop-btn" class="record-control" disabled>
                    Stop
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div id="doctors" class="list-doctors">
            <button id="see-doctors-btn" class="log-symptoms-button">
              <img src="../assets/svgs/add.svg" alt="+" />
              See All Doctors
            </button>

            <div id="doctors-list-container" class="floating-box hidden">
              <h3 class="section-title">Available Doctors</h3>
              <form id="doctors-form">
                <div id="doctors-list" class="doctor-grid"></div>
                <div
                  style="
                    display: flex;
                    justify-content: flex-end;
                    margin-top: 1rem;
                  "
                >
                  <button type="submit" class="save-btn">
                    Request Selected Doctor
                  </button>
                </div>
              </form>
            </div>
            <div
              id="doctor-status-box"
              class="floating-box hidden"
              style="margin-top: 1rem"
            >
              <h3 class="section-title">Doctor Request Status</h3>
              <p id="doctor-status-text" style="font-size: 1.1rem"></p>
            </div>
          </div>
        </article>
      </section>

      <section class="sidebar sidebar-dark"></section>
    </main>

    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="../assets/svgs/logo_white.svg" alt="MotivSMA Logo" />
          <span>MotivSMA</span>
        </div>
        <div class="footer-links">
          <a href="#">About</a>
          <a href="#">Privacy Policy</a>
          <a href="#">Contact</a>
        </div>
        <div class="footer-copy">
          &copy; 2025 MotivSMA | All rights reserved
        </div>
      </div>
    </footer>

    <!--<script>
      const token = localStorage.getItem("token");
      const role = localStorage.getItem("role");

      if (!token) {
        window.location.href = "../../index.html";
      } else if (role !== "PATIENT") {
        window.location.href = "../../index.html";
      }
    </script>

    <script src="../js/logout.js"></script>
  -->
    <script src="../js/measurementSessions.js"></script>
    <script src="../js/patient.js"></script>
  </body>
</html>
